<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">   
    <title>Courses</title>

    <div class = "header">
        <div class = "header-content">
            <div class = "header-text">
                <h1>Uncle Geri's Driving Academy</h1>
                <p>  804-251-0102</p>
            </div>
            <div class ="header-logo">
                <img src = "imgs/logo.png" alt="Logo">
            </div>
        </div>
        <nav class="navbar">
            <a href="courses.html"><button>Courses</button></a>
            <a href="register.html"><button>Register</button></a>
            <a href ="faq.html"><button>FAQs</button></a>
            <a href="connect.html"><button>Connect</button></a>
        </nav>    
    
    </div>
    
    </div>
    </head>
<body>
    <div class ="main-courses">
    <div class="courses-sidebar">
        
            <button onclick="showDescription('behind-the-wheel')">Behind the Wheel</button>
            <button onclick="showDescription('1-1')">1-1 In Car Lessons </button>
            <!--<li><button onclick="showDescription('online')">Online Driver's Education</button></li>
            <li><button onclick="showDescription('rexam')">Re-Exam Course</button></li>-->
            <button onclick="showDescription('adult')">Adult DMV road test</button>
        
    </div>
    <div class="course-description">
        <h2 id="course-title">Behind the Wheel</h2>
        <p id="course-details">This course provides comprehensive behind-the-wheel training for new drivers,
             focusing on practical skills and road safety.</p>
    </div>
    </div>

    <script>
        let descriptions = {};

async function fetchCourses() {
  try {
    const res = await fetch('https://unclegeri-backend.onrender.com/api/courses');
    const data = await res.json();
    console.log('Fetched courses:', data);

    descriptions = {};
    const sidebar = document.querySelector('.courses-sidebar');
    sidebar.innerHTML = ''; // Clear sidebar buttons

    data.forEach(course => {
      descriptions[course.course_key] = {
        title: course.title,
        details: course.description
      };

      const button = document.createElement('button');
      button.textContent = course.title;
      button.onclick = () => showDescription(course.course_key);
      sidebar.appendChild(button);
    });

    // Show first course by default
    if (data.length > 0) {
      showDescription(data[0].course_key);
    }
  } catch (err) {
    console.error('Failed to fetch courses:', err);
    document.querySelector('.course-description').innerHTML =
      '<p>Could not load course information. Please try again later.</p>';
  }
}

        function showDescription(courseKey){

            const course = descriptions[courseKey]; // Retrieve the course from the descriptions object
            const titleEl = document.getElementById('course-title');
    const detailsEl = document.getElementById('course-details');

    if (!titleEl || !detailsEl) {
        console.error('Elements not found in DOM');
        return;
    }

    if (!course || !course.title || !course.details) {
        titleEl.textContent = 'Course Not Found';
        detailsEl.innerHTML = '';
        return;
    }

    titleEl.textContent = course.title;
    detailsEl.innerHTML = course.details.replace(/\n/g, '<br>');
}
        //Set default course description
        document.addEventListener('DOMContentLoaded', fetchCourses);
    </script>
</body>
<footer class="footer">
    <div class="footer-section">
        <h3>Learn More</h3>
        <a href="courses.html">Courses</a>
        <a href="faqs.html">FAQs</a>
    </div>
    <div class="footer-section">
        <button onclick ="window.location.href='register.html'">Register Now!</button>
    </div>
    <div class="footer-section">
        <a href="connect.html" class="footer-icon">
            <img src="imgs/message.png" alt="Connect">
        </a>
    </div>
    <div class="footer-section">
        <a href="index.html" class="footer-icon">
            <img src="imgs/home.png" alt="Home">
        </a>
    </div>
    </div>
</footer>
</html>