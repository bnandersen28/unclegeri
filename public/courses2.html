<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <script src="https://cdn.jsdelivr.net/npm/markdown/lib/markdown.min.js"></script>
    <title>Courses</title>
</head>

<body>
    <div class="header">
        <div class="header-top"></div>
        <div class="header-content">

            <div class="nav-left">
                <a href="courses.html"><button>Courses</button></a>
                <a href="register.html"><button>Register</button></a>
            </div>


            <div class="header-logo">
                <img src="imgs/logo.png" alt="Logo">
            </div>

            <div class="nav-right">
                <a href="faq.html"><button>FAQs</button></a>
                <a href="connect.html"><button>Connect</button></a>
            </div>


        </div>

    </div>
    <div class="courses-container">
        <h2>Courses offered</h2>
        <div class="courses-boxes">
            <h2>In-person</h2>
            <div class="courses-items" id="inPersonCourses">
            </div>
        </div>
        <div class="hidden-content-container" id="inPersonDetails" style="display:block"></div>
        <div class="courses-boxes">
            <h2>Online (Coming Soon)</h2>
            <div class="courses-items" id="onlineCourses">

            </div>
        </div>
        <div class="hidden-content-container" id="onlineDetails" style="display:block"></div>
    </div>
    </div>


    <footer class="footer">
        <div class="footer-section">
            <h3>Learn More</h3>
            <a href="courses.html">Courses</a>
            <a href="faqs.html">FAQs</a>
        </div>
        <div class="footer-section">
            <button onclick="window.location.href='register.html'">Register Now!</button>
        </div>
        <div class="footer-section">
            <a href="connect.html" class="footer-icon">
                <img src="imgs/message.png" alt="Connect">
            </a>
        </div>
        <div class="footer-section">
            <a href="index.html" class="footer-icon">
                <img src="imgs/home.png" alt="Home">
            </a>
        </div>
        </div>
    </footer>

</html>

<script>
    const backend = 'https://unclegeri-backend.onrender.com';

    document.addEventListener('DOMContentLoaded', async () => {
        try {
            const res = await fetch(`${backend}/api/courses`);
            const data = await res.json();

            const inPersonContainer = document.getElementById('inPersonCourses');
            const onlineContainer = document.getElementById('onlineCourses');
            const inPersonDetails = document.getElementById('inPersonDetails');
            const onlineDetails = document.getElementById('onlineDetails');


            data.forEach(course => {
                const courseEl = document.createElement('div');
                courseEl.className = 'courses-item';


                courseEl.innerHTML = `
                    <h2>${course.title}</h2>
                `;

                courseEl.addEventListener('click', () => {
                    const markdownHTML = markdown.toHTML(course.description || '');
                    const detailsHTML = `
                    <div class="hidden-content" style="display: block;"> 
                        <div class="hidden-textbox">
                            <div class="hidden-border">
                                <h2>${course.title}</h2>
                                <div>${markdownHTML}</div>
                            </div>
                        </div>
                    </div>
                `;
               

                // Clear both details areas
                inPersonDetails.innerHTML = '';
                onlineDetails.innerHTML = '';

                if(course.delivery=='online'){
                    onlineDetails.innerHTML = detailsHTML;
                    onlineDetails.scrollIntoView({ behavior: 'smooth' });
                } else {
                    inPersonDetails.innerHTML = detailsHTML;
                    inPersonDetails.scrollIntoView({ behavior: 'smooth' });
                }

                });


                if (course.delivery === 'online') {
                    onlineContainer.appendChild(courseEl);
                } else {
                    inPersonContainer.appendChild(courseEl);
                }
            });
        } catch (err) {
            console.error('Failed to load courses:', err);
        }

    });



</script>